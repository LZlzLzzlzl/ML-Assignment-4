<div align="center">

# Assignment 4: å¼ºåŒ–å­¦ä¹ 

[![Python](https://img.shields.io/badge/Python-3.8-blue.svg)](https://www.python.org/)
[![Deadline](https://img.shields.io/badge/Deadline-Dec%2014-red.svg)](http://101.132.193.95:3000)
[![License](https://img.shields.io/badge/License-Educational-green.svg)](LICENSE)

**ğŸ“… æˆªæ­¢æ—¥æœŸï¼š12æœˆ14æ—¥** | **ğŸ† [æŸ¥çœ‹æ’è¡Œæ¦œ](http://101.132.193.95:3000)** | **ğŸ“‹ Assignment ID: 04**

### ğŸ“¤ æäº¤æ–¹å¼: é€šè¿‡å¯æ‰§è¡Œæ–‡ä»¶æäº¤

---

</div>

## ğŸ“‹ ä»»åŠ¡æ¦‚è¿°

> æœ¬æ¬¡ä»»åŠ¡è¦æ±‚é€šè¿‡å¼ºåŒ–å­¦ä¹ ç®—æ³•è§£å†³ä¸€ä¸ªåŠ¨æ€ä½ç½®ä¼˜åŒ–é—®é¢˜ã€‚åœ¨ä¸€ä¸ªç£æ€§çƒç¯å¢ƒä¸­ï¼Œæ™ºèƒ½ä½“ï¼ˆPï¼‰éœ€è¦å­¦ä¹ è°ƒæ•´å…¶ä½ç½®ï¼Œä»¥æœ€å¤§åŒ–ä¸åŠ¨æ€å˜åŒ–çš„ç›®æ ‡çƒï¼ˆqï¼‰ç›¸å…³çš„å¥–åŠ±ä¿¡å·ã€‚ç›®æ ‡çƒä¼šæ ¹æ®æ™ºèƒ½ä½“çš„ç§»åŠ¨è€Œå“åº”æ€§åœ°ç§»åŠ¨ï¼Œå½¢æˆä¸€ä¸ªå¤æ‚çš„åŠ¨æ€ç³»ç»Ÿã€‚

## ğŸ¯ ç¯å¢ƒæè¿°

### ç¯å¢ƒå‚æ•°
- **è½¨é“èŒƒå›´**: 0-99
- **åŠ¨ä½œèŒƒå›´**: -99åˆ°99
- **æ¯è½®æ­¥æ•°**: 200æ­¥

### çŠ¶æ€å’ŒåŠ¨ä½œ
- **çŠ¶æ€**: å½“å‰æ™ºèƒ½ä½“ä½ç½® P
- **åŠ¨ä½œ**: ç§»åŠ¨è·ç¦»ï¼ˆæ•´æ•°ï¼ŒèŒƒå›´-99åˆ°99ï¼‰
- **ä½ç½®æ›´æ–°é€»è¾‘**: å½“å‰ä½ç½® P æ‰§è¡ŒåŠ¨ä½œ action åï¼Œæ–°ä½ç½®ä¸º `P_new = P + action`ã€‚å¦‚æœæ–°ä½ç½®è¶…å‡ºè½¨é“è¾¹ç•Œ [0, 99]ï¼Œä¼šè§¦å‘åå¼¹æœºåˆ¶ï¼š
  - å¦‚æœ `P_new < 0`ï¼šè¶…å‡ºè¾¹ç•Œçš„è·ç¦»é™¤ä»¥2ååå¼¹ï¼Œå³ `P_final = 0 + abs(P_new) // 2`
  - å¦‚æœ `P_new > 99`ï¼šè¶…å‡ºè¾¹ç•Œçš„è·ç¦»é™¤ä»¥2ååå¼¹ï¼Œå³ `P_final = 99 - (P_new - 99) // 2`
  - æœ€ç»ˆä½ç½®ä¼šè¢«é™åˆ¶åœ¨ [0, 99] èŒƒå›´å†…
- **è½¨è¿¹**: åŒ…å«å†å²çŠ¶æ€ã€åŠ¨ä½œå’Œå¥–åŠ±çš„åºåˆ—ï¼Œæ¯ä¸ªå…ƒç´ ä¸º (P, action, reward) ä¸‰å…ƒç»„
- **å¥–åŠ±è®¡ç®—**: å¥–åŠ±åŸºäºæ™ºèƒ½ä½“Pä¸ç›®æ ‡çƒqä¹‹é—´çš„è·ç¦»è®¡ç®—ï¼Œè·ç¦»è¶Šè¿‘å¥–åŠ±å€¼è¶Šå¤§


#### è½¨è¿¹ç¤ºä¾‹

**åˆå§‹çŠ¶æ€ç¤ºä¾‹**ï¼ˆç¬¬0æ­¥ï¼‰ï¼š
```python
# è½¨è¿¹ä¸ºç©ºåˆ—è¡¨ []
state = 50  # å½“å‰çŠ¶æ€ï¼ˆæ‰§è¡ŒåŠ¨ä½œå‰çš„ä½ç½®P=50ï¼‰
trajectory = []  # ç©ºè½¨è¿¹ï¼ˆåˆå§‹çŠ¶æ€ï¼‰
```

**ä¸­é—´çŠ¶æ€ç¤ºä¾‹**ï¼ˆç¬¬5æ­¥ï¼‰ï¼š
```python
# è½¨è¿¹åŒ…å«å‰4æ­¥çš„å†å²è®°å½•ï¼Œæ¯ä¸ªå…ƒç´ ä¸º(æ–°çŠ¶æ€, åŠ¨ä½œ, å¥–åŠ±)
state = 67  # å½“å‰çŠ¶æ€ï¼ˆæ‰§è¡ŒåŠ¨ä½œå‰çš„ä½ç½®P=67ï¼‰
trajectory = [
    (60, 10, 0.15),   # ç¬¬0æ­¥ï¼šä»50ç§»åŠ¨åˆ°60ï¼Œæ‰§è¡ŒåŠ¨ä½œ10ï¼Œå¥–åŠ±0.15
    (55, -5, 0.23),   # ç¬¬1æ­¥ï¼šä»60ç§»åŠ¨åˆ°55ï¼Œæ‰§è¡ŒåŠ¨ä½œ-5ï¼Œå¥–åŠ±0.23
    (63, 8, 0.18),    # ç¬¬2æ­¥ï¼šä»55ç§»åŠ¨åˆ°63ï¼Œæ‰§è¡ŒåŠ¨ä½œ8ï¼Œå¥–åŠ±0.18
    (67, 4, 0.12)     # ç¬¬3æ­¥ï¼šä»63ç§»åŠ¨åˆ°67ï¼Œæ‰§è¡ŒåŠ¨ä½œ4ï¼Œå¥–åŠ±0.12
]
```

### ğŸ“Š ç¦»çº¿æ•°æ®é›†è¯´æ˜

é¡¹ç›®æä¾›äº†`offline_data.csv`ç¦»çº¿æ•°æ®é›†ï¼ŒåŒ…å«1000ä¸ªtrialçš„å®Œæ•´è½¨è¿¹æ•°æ®ï¼Œå¯ç”¨äºç­–ç•¥åˆ†æå’Œç®—æ³•è°ƒè¯•ã€‚

#### æ•°æ®é›†å­—æ®µè¯´æ˜
| å­—æ®µå | è¯´æ˜ | 
|--------|------|
| **trial_id** | è¯•éªŒç¼–å· |
| **step_id** | å½“å‰è¯•éªŒä¸­çš„æ­¥æ•° | 
| **P** | æ™ºèƒ½ä½“å½“å‰ä½ç½® | 
| **action** | æ‰§è¡Œçš„åŠ¨ä½œ |
| **reward** | è·å¾—çš„å¥–åŠ± |

#### æ•°æ®é›†ç»Ÿè®¡ä¿¡æ¯
- **æ€»trialæ•°**: 1000ä¸ª
- **æ¯ä¸ªtrialæ­¥æ•°**: 200æ­¥
- **æ€»æ•°æ®é‡**: 200,000æ¡è®°å½•

> ğŸ’¡ **æç¤º**: ç¦»çº¿æ•°æ®å¯ä»¥å¸®åŠ©ä½ ç†è§£ç¯å¢ƒåŠ¨æ€ï¼Œä½†æœ€ç»ˆè¯„æµ‹ä½¿ç”¨çš„æ˜¯å®æ—¶ç¯å¢ƒï¼Œç­–ç•¥éœ€è¦èƒ½å¤Ÿé€‚åº”ç¯å¢ƒçš„éšæœºæ€§ã€‚

### ğŸ¯ æ•°æ®æ”¶é›†ä¸ç­–ç•¥ä¼˜åŒ–å»ºè®®

é™¤äº†ä½¿ç”¨æä¾›çš„ç¦»çº¿æ•°æ®ï¼Œä½ è¿˜å¯ä»¥åœ¨ `policy` å‡½æ•°ä¸­æ·»åŠ æ•°æ®æ”¶é›†é€»è¾‘æ¥ç”Ÿæˆè‡ªå·±çš„è®­ç»ƒæ•°æ®ã€‚

**æ•°æ®æ”¶é›†ç­–ç•¥å»ºè®®**ï¼š
- **æ•°æ®æ”¶é›†**: åœ¨ `policy` å‡½æ•°ä¸­ï¼Œå°†å½“å‰çŠ¶æ€å’Œè½¨è¿¹ä¿å­˜åˆ°æ–‡ä»¶ä¸­ï¼Œä»¥ä¾¿åç»­åˆ†æã€‚
- **æ•°æ®åˆ†æ**: ä½¿ç”¨ç¦»çº¿æ•°æ®é›†è¿›è¡Œç­–ç•¥åˆ†æï¼Œäº†è§£ç¯å¢ƒç‰¹æ€§ã€‚
- **ç­–ç•¥è°ƒæ•´**: æ ¹æ®æ•°æ®åˆ†æç»“æœï¼Œè°ƒæ•´ç­–ç•¥ä»¥é€‚åº”ç¯å¢ƒå˜åŒ–ã€‚
é€šè¿‡æ”¶é›†è‡ªå·±çš„æ•°æ®ï¼Œä½ å¯ä»¥æ›´å¥½åœ°ç†è§£ç¯å¢ƒç‰¹æ€§ï¼Œå¹¶é’ˆå¯¹æ€§åœ°ä¼˜åŒ–ç­–ç•¥ã€‚

## ğŸ’» ä»£ç è¦æ±‚

### solution.py ä»£ç è¦æ±‚
åœ¨ `solution.py` ä¸­å®ç° `Solution` ç±»çš„policyå‡½æ•°ï¼š

```python
def policy(self, state, trajectory):
    """
    å®ç°ä½ çš„ç­–ç•¥å‡½æ•°
    
    å‚æ•°:
        state: å½“å‰çŠ¶æ€ï¼ˆæ™ºèƒ½ä½“ä½ç½®Pï¼‰
        trajectory: å†å²è½¨è¿¹åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ ä¸º(P, action, reward)ä¸‰å…ƒç»„
    
    è¿”å›:
        action: è¦æ‰§è¡Œçš„åŠ¨ä½œï¼ˆæ•´æ•°ï¼ŒèŒƒå›´-99åˆ°99ï¼‰
    """
    # æ•°æ®æ”¶é›†ç¤ºä¾‹ï¼šä¿å­˜è½¨è¿¹æ•°æ®åˆ°æ–‡ä»¶
    # if len(trajectory) > 0:
    #     # è®°å½•ä¸Šä¸€ä¸ªçŠ¶æ€ã€åŠ¨ä½œã€å¥–åŠ±å’Œå½“å‰çŠ¶æ€
    #     with open("collected_data.csv", "a") as f:
    #         P, action, reward = trajectory[-1]
    #         f.write(f"{P},{action},{reward},{state}\n")
    
    # ä½ çš„ç­–ç•¥å®ç°
    action = np.random.randint(-99, 99)  # ç¤ºä¾‹åŠ¨ä½œï¼Œå®é™…ç­–ç•¥éœ€è¦æ ¹æ®çŠ¶æ€å’Œè½¨è¿¹è¿›è¡Œè®¡ç®—
    # å¯ä»¥æ ¹æ®æ”¶é›†çš„æ•°æ®è¿›è¡Œåˆ†æå’Œç­–ç•¥è°ƒæ•´
    
    return action
```

## ğŸ“ˆ è¯„åˆ†æ ‡å‡† (æ€»åˆ† 20åˆ†)

æœ¬æ¬¡ä½œä¸šæ€»åˆ†ä¸º 20 åˆ†ã€‚

### è¯„åˆ†è§„åˆ™ï¼ˆåŸºäºTotalRewardï¼‰
æ ¹æ®TotalRewardå¾—åˆ†è¿›è¡Œçº¿æ€§æ’å€¼è®¡ç®—åŸºç¡€åˆ†æ•°ï¼š

#### è¯„åˆ†åŸºå‡†ç‚¹
- **åŸºå‡†çº¿1**: TotalReward = 20 â†’ **6åˆ†**
- **åŸºå‡†çº¿2**: TotalReward = 94.61 â†’ **10åˆ†**
- **æ’è¡Œæ¦œå‰10%çº¿**: TotalReward = FullScoreRewardï¼ˆæ’è¡Œæ¦œå‰10%çš„æœ€ä½åˆ†ï¼‰ â†’ **20åˆ†**

#### åŸºç¡€å¾—åˆ†è§„åˆ™

| åœºæ™¯ | æ¡ä»¶è¯´æ˜ | åŸºç¡€å¾—åˆ† |
| :--- | :--- | :--- |
| **1** | TotalReward â‰¤ 20 | **6 åˆ†** |
| **2** | 20 < TotalReward < 94.61 | **6 ~ 10 åˆ†** (çº¿æ€§æ’å€¼) |
| **3** | 94.61 â‰¤ TotalReward < FullScoreReward | **10 ~ 20 åˆ†** (çº¿æ€§æ’å€¼) |
| **4** | TotalReward â‰¥ FullScoreReward | **20 åˆ†** |

---

## âš™ï¸ ç¯å¢ƒè¦æ±‚

<div align="center">

![Python](https://img.shields.io/badge/Python-3.8+-blue?style=for-the-badge&logo=python&logoColor=white)
![NumPy](https://img.shields.io/badge/NumPy-013243?style=for-the-badge&logo=numpy&logoColor=white)
![Requests](https://img.shields.io/badge/Requests-2.31+-green?style=for-the-badge&logo=python&logoColor=white)

</div>

## ğŸš€ è¿è¡Œè¯„æµ‹

### ğŸ“¦ 1. ä¾èµ–å®‰è£…:

æ¨èä½¿ç”¨condaç¯å¢ƒï¼š

```bash
conda create -n ML python=3.8
conda activate ML
```

### âš™ï¸ 2. è®¾ç½®ç¯å¢ƒå˜é‡

**ğŸ§ Linux/ ğŸ macOS:**

```bash
export STUDENT_ID='ä½ çš„å­¦å·'
export STUDENT_NAME='ä½ çš„å§“å'
export STUDENT_NICKNAME='ä½ çš„æ˜µç§°'
export MAIN_CONTRIBUTOR='AI' 
```

**ğŸªŸ Windows PowerShell:**

```powershell
$env:STUDENT_ID="ä½ çš„å­¦å·"
$env:STUDENT_NAME="ä½ çš„å§“å"
$env:STUDENT_NICKNAME="ä½ çš„æ˜µç§°"
$env:MAIN_CONTRIBUTOR="human"
```

### â–¶ï¸ 3. è¿è¡Œè¯„æµ‹

**å¤šå¹³å°å¯æ‰§è¡Œæ–‡ä»¶**ï¼š

æ ¹æ®ä½ çš„æ“ä½œç³»ç»Ÿé€‰æ‹©ç›¸åº”çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼š

**ğŸ§ Linux/ ğŸ macOS:**
```bash

chmod +x evaluate-linux     # Linuxç‰ˆæœ¬
./evaluate-linux

chmod +x evaluate-macos     # macOSç‰ˆæœ¬
./evaluate-macos
```


**ğŸªŸ Windows:**
```cmd
evaluate-win.exe
```
æˆ–è€…ä½¿ç”¨PowerShell:
```powershell
.\evaluate-win.exe
```

**è¯„æµ‹é…ç½®**ï¼š
- **æ—¶é—´é™åˆ¶**: 60ç§’
- **æ­¥æ•°**: 200æ­¥
- **è¯„ä¼°æŒ‡æ ‡**: 200æ­¥æ€»å¥–åŠ±å€¼
- **æäº¤å¹³å°**: æ”¯æŒæ°´æ‰å¹³å°æäº¤

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
Starting reinforcement learning assignment evaluation
============================================================
Evaluation configuration:
  Total steps: 200
  Time limit: 60 seconds
  Reward metric: 200-step total reward
============================================================
Found solution.py file
Running mode: 1

Starting reinforcement learning policy evaluation...
--------------------------------------------------
Evaluation completed:
  Steps completed: 200/200
  Total reward: 15.234567
  Evaluation time: 2.34 seconds
  Status: Completed normally

Submitting to leaderboard...
Submission successful!

Evaluation completed!
Final reward: 15.234567
```

### â±ï¸ è¶…æ—¶å¤„ç†è¯´æ˜

**é‡è¦**ï¼šè¯„æµ‹ç³»ç»Ÿæœ‰**60ç§’æ—¶é—´é™åˆ¶**ã€‚å¦‚æœè¯„ä¼°è¶…æ—¶ï¼š

- **è‡ªåŠ¨æˆªæ–­**ï¼šç³»ç»Ÿä¼šç«‹å³åœæ­¢åç»­æ­¥éª¤çš„æ‰§è¡Œ
- **è¯„ä¼°æœºåˆ¶**ï¼šä½¿ç”¨**å½“å‰å·²è·å¾—çš„æ€»å¥–åŠ±**ä½œä¸ºæœ€ç»ˆå¾—åˆ†
- **æ­£å¸¸è®¡åˆ†**ï¼šè¶…æ—¶ä¸ä¼šå½±å“å¾—åˆ†è®¡ç®—ï¼Œç›´æ¥ä½¿ç”¨å·²å®Œæˆçš„å¥–åŠ±å€¼

---

## ğŸ† Leaderboard

<div align="center">

### ğŸŒ è®¿é—®åœ°å€

**ğŸ”— [http://101.132.193.95:3000](http://101.132.193.95:3000)**

---

</div>

### ğŸ“‹ æäº¤è¯´æ˜

1. **æäº¤æ–¹å¼**: è¿è¡Œå¯¹åº”å¹³å°çš„å¯æ‰§è¡Œæ–‡ä»¶è¿›è¡Œæäº¤
2. **æäº¤é¢‘ç‡**: æ”¯æŒå¤šæ¬¡æäº¤ï¼Œç³»ç»Ÿè®°å½•æœ€ä½³æˆç»©
3. **æäº¤æ—¶é—´**: æˆªæ­¢æ—¥æœŸå‰çš„æ‰€æœ‰æäº¤å‡æœ‰æ•ˆ
4. **æˆç»©è®¡ç®—**: ä»¥æˆªæ­¢æ—¥æœŸå‰è·å¾—çš„æœ€é«˜TotalRewardä¸ºå‡†

---

### ğŸ‰ ç¥ä½ å–å¾—å¥½æˆç»©ï¼

**ğŸ“… è®°å¾—åœ¨æˆªæ­¢æ—¥æœŸå‰æäº¤ä½ çš„æœ€ä½³æˆç»©ï¼**

---

Made with â¤ï¸ for Machine Learning Education

</div>
